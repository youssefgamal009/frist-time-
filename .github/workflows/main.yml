on:
  push:
    branches:
      - master





jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v3

       
      - name: "Login to Docker hub"
        run: docker login --username ${{ secrets.DOCKER_USERNAME }} --password ${{ secrets.DOCKER_TOKEN }}

        - name: bundle install
          run: |
               bundle config path vendor/bundle
               bundle install --jobs 4 --retry 3 --frozen
              bundle exec appraisal install

        - name: RuboCop
          run: bundle exec rubocop --parallel

        - name: RSpec
          run: |
               bundle exec rake db:reset
               bundle exec appraisal rspec
          env:
            RAILS_ENV: test
        
        

     
     

      